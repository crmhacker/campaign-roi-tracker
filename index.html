<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Click → Closed: Live ROI Tracking Demo</title>
  <meta name="description" content="See what we track from a single click — and how we use it to prove campaign ROI." />
  <!-- Minimal, branded, single-file landing page by CRM Hacker -->
  <style>
    :root{
      /* ===== Brand (EDIT THESE) ===== */
      --brand:#2563eb;         /* Primary accent */
      --brand-2:#22d3ee;       /* Secondary accent */
      --bg:#0b0c10;            /* Page background */
      --card:#111827;          /* Card background */
      --muted:#9ca3af;         /* Secondary text */
      --text:#e5e7eb;          /* Primary text */
      --border:#1f2937;        /* Card border */
      --ok:#10b981;            /* Success */
      --warn:#f59e0b;          /* Warning */
      --danger:#ef4444;        /* Danger */
      --radius:18px;           /* Card rounding */
      --shadow:0 12px 32px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
      background: var(--bg); color: var(--text); -webkit-font-smoothing:antialiased;
    }
    .container{max-width:1200px;margin:0 auto;padding:24px}
    .hero{
      background: radial-gradient(1200px 400px at 20% -10%, rgba(37,99,235,.25), transparent 60%),
                  radial-gradient(900px 400px at 80% -10%, rgba(34,211,238,.18), transparent 60%),
                  var(--card);
      border-bottom: 1px solid var(--border);
    }
    .hero-inner{display:flex;align-items:center;gap:20px;padding:48px 0}
    .logo{
      width:48px;height:48px;border-radius:12px;background:
        linear-gradient(145deg, var(--brand), var(--brand-2));box-shadow: var(--shadow);
      flex:0 0 48px;
    }
    h1{font-size: clamp(28px, 4vw, 44px); line-height:1.1; margin:0 0 8px}
    .sub{color:var(--muted); margin:0}
    .notice{background:#0d1b2a;border:1px solid #1b263b;border-radius:var(--radius);padding:16px;margin:18px 0}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid.cols-2{grid-template-columns:1fr 1fr}}
    @media(min-width:1000px){.grid.cols-3{grid-template-columns:repeat(3,1fr)}}
    @media(min-width:1100px){.grid.cols-4{grid-template-columns:repeat(4,1fr)}}
    .card{
      background:var(--card); border:1px solid var(--border);
      border-radius:var(--radius); padding:20px; box-shadow: var(--shadow);
    }
    .section{margin:26px 0}
    .kicker{font-size:12px; letter-spacing:.12em; text-transform:uppercase; color:var(--muted); margin-bottom:8px}
    .h2{font-size:22px; margin:0 0 6px}
    .p{color:var(--muted); margin:6px 0 14px}
    .kv{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      background:rgba(255,255,255,.02); border:1px dashed var(--border); padding:10px 12px; border-radius:12px
    }
    .kv label{color:var(--muted); font-size:12px}
    .kv code{font-family: ui-monospace,SFMono-Regular,Menlo,monospace; background:#0b0c10;border:1px solid var(--border); padding:2px 6px;border-radius:8px}
    .explain{font-size:12px; color:var(--muted)}
    .tag{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; border:1px solid var(--border); color:var(--muted); font-size:12px; background:#0b0c10}
    .tag .dot{width:8px;height:8px;border-radius:50%}
    .tags{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .callout{border-left:3px solid var(--brand);padding-left:12px}
    .flow{
      display:grid; gap:12px; margin-top:6px
    }
    @media(min-width:900px){.flow{grid-template-columns:repeat(5,1fr)}}
    .step{position:relative;padding:14px;border:1px solid var(--border);border-radius:14px;background:#0c1220}
    .step:after{
      content:"→"; position:absolute; right:-10px; top:50%; transform:translateY(-50%);
      color:var(--muted)
    }
    .step:last-child:after{display:none}
    .sm{font-size:12px;color:var(--muted)}
    .cta{
      display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between;
      background:linear-gradient(145deg, rgba(37,99,235,.18), rgba(34,211,238,.12)); border:1px solid var(--border);
      border-radius:var(--radius); padding:18px
    }
    .btn{
      background:var(--brand); color:white; border:none; border-radius:12px; padding:12px 16px;
      font-weight:700; cursor:pointer; box-shadow: var(--shadow); text-decoration:none; display:inline-block
    }
    .btn.secondary{background:transparent;color:var(--text);border:1px solid var(--border)}
    .footer{color:var(--muted); font-size:12px; margin:24px 0}
    .row{display:grid; gap:12px}
    @media(min-width:900px){.row.cols-2{grid-template-columns:1fr 1fr}}
    @media(min-width:1100px){.row.cols-3{grid-template-columns:repeat(3,1fr)}}
    .muted{color:var(--muted)}
  </style>
  <!-- PDF (optional, for one-file simplicity use CDNs) -->
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <header class="hero">
    <div class="container hero-inner">
      <div class="logo" title="Logo"></div>
      <div>
        <h1>From Click → Closed: watch your own data populate in real time.</h1>
        <p class="sub">This is the public, free data we pull instantly — and how modern teams use it to make marketing decisions.</p>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="notice">We capture URL params (UTMs & click IDs), referrer, device, IP geo, and on-page engagement. No paid enrichment tools here — this is the “minimum viable proof.”</div>

    <!-- Acquisition & Attribution -->
    <section class="section card">
      <div class="kicker">Acquisition & Attribution</div>
      <h2 class="h2">Where did this click come from?</h2>
      <p class="p">Tie spend to outcomes. These parameters power channel/campaign/keyword ROI — and de-duplicate credit across platforms.</p>

      <div class="grid cols-2">
        <div>
          <div class="kv"><label>Referrer</label><code id="referrer">—</code></div>
          <div class="kv"><label>Landing URL</label><code id="landingUrl">—</code></div>
          <div class="kv"><label>utm_source</label><code id="utm_source">—</code></div>
          <div class="kv"><label>utm_medium</label><code id="utm_medium">—</code></div>
          <div class="kv"><label>utm_campaign</label><code id="utm_campaign">—</code></div>
          <div class="kv"><label>utm_content</label><code id="utm_content">—</code></div>
          <div class="kv"><label>utm_term</label><code id="utm_term">—</code></div>
        </div>
        <div>
          <div class="kv"><label>gclid (Google Ads)</label><code id="gclid">—</code></div>
          <div class="kv"><label>fbclid (Meta)</label><code id="fbclid">—</code></div>
          <div class="kv"><label>msclkid (Microsoft)</label><code id="msclkid">—</code></div>
          <div class="kv"><label>ttclid (TikTok)</label><code id="ttclid">—</code></div>
          <div class="kv"><label>li_fat_id (LinkedIn)</label><code id="li_fat_id">—</code></div>
          <div class="kv"><label>Campaign Grouping</label><code id="campaignGroup">—</code></div>
        </div>
      </div>

      <div class="tags">
        <span class="tag"><span class="dot" style="background:var(--ok)"></span>Use to attribute revenue back to channel + campaign</span>
        <span class="tag"><span class="dot" style="background:var(--brand)"></span>Drive budget to high-ROI sources</span>
        <span class="tag"><span class="dot" style="background:var(--warn)"></span>Find wasted spend & duplicate credit</span>
      </div>
    </section>

    <!-- Device & Environment -->
    <section class="section card">
      <div class="kicker">Device & Environment</div>
      <h2 class="h2">How are they experiencing your page?</h2>
      <p class="p">Creative and UX decisions follow the buyer’s actual setup — device type, OS, browser, and screen.</p>
      <div class="row cols-3">
        <div class="kv"><label>Device Type</label><code id="deviceType">—</code></div>
        <div class="kv"><label>OS</label><code id="os">—</code></div>
        <div class="kv"><label>Browser</label><code id="browser">—</code></div>
      </div>
      <div class="row cols-2" style="margin-top:10px">
        <div class="kv"><label>Screen</label><code id="screen">—</code></div>
        <div class="kv"><label>User Agent</label><code id="ua">—</code></div>
      </div>
      <p class="explain">Use cases: mobile-first pages, browser-targeted QA, creative spec changes (e.g., text density for Safari vs Chrome).</p>
    </section>

    <!-- Geo & Org -->
    <section class="section card">
      <div class="kicker">Geo & Org</div>
      <h2 class="h2">Where is this click coming from?</h2>
      <p class="p">IP-based geo + org/ISP hint at regional performance and potential company match. (Corporate resolution is limited without paid tools.)</p>
      <div class="row cols-3">
        <div class="kv"><label>IP</label><code id="ip">—</code></div>
        <div class="kv"><label>City</label><code id="city">—</code></div>
        <div class="kv"><label>Region</label><code id="region">—</code></div>
      </div>
      <div class="row cols-2" style="margin-top:10px">
        <div class="kv"><label>Country</label><code id="country">—</code></div>
        <div class="kv"><label>Org / ISP</label><code id="org">—</code></div>
      </div>
      <div class="tags">
        <span class="tag"><span class="dot" style="background:var(--brand-2)"></span>Geo bid adjustments</span>
        <span class="tag"><span class="dot" style="background:var(--ok)"></span>Region-specific messaging</span>
        <span class="tag"><span class="dot" style="background:var(--warn)"></span>Lead scoring boost for matched locations</span>
      </div>
    </section>

    <!-- Engagement -->
    <section class="section card">
      <div class="kicker">Engagement Signals</div>
      <h2 class="h2">Did they actually engage?</h2>
      <p class="p">Simple, high-signal metrics for qualification and CRO — without getting creepy.</p>
      <div class="row cols-3">
        <div class="kv"><label>Time on Page</label><code id="timeOnPage">0s</code></div>
        <div class="kv"><label>Scroll Depth</label><code id="scrollDepth">0%</code></div>
        <div class="kv"><label>Pageviews (this session)</label><code id="pageviews">1</code></div>
      </div>
      <p class="explain">Use cases: prioritize engaged visitors for retargeting, trigger “nudge” CTAs after X seconds, score MQLs by depth + time.</p>
    </section>

    <!-- Journey & ROI -->
    <section class="section card">
      <div class="kicker">From Click to Revenue</div>
      <h2 class="h2">How this connects to ROI</h2>
      <div class="flow">
        <div class="step">
          <strong>1) Ad Click</strong><br><span class="sm">UTMs + clids captured</span>
        </div>
        <div class="step">
          <strong>2) Web Session</strong><br><span class="sm">Device, geo, engagement</span>
        </div>
        <div class="step">
          <strong>3) Lead</strong><br><span class="sm">Form capture + enrichment</span>
        </div>
        <div class="step">
          <strong>4) Pipeline</strong><br><span class="sm">Opp created w/ source</span>
        </div>
        <div class="step">
          <strong>5) Revenue</strong><br><span class="sm">Closed won → campaign ROI</span>
        </div>
      </div>
      <div class="card" style="margin-top:16px;background:#0c1220">
        <div class="kicker">Sample Projection (demo values)</div>
        <p class="p">
          Click est. cost: <strong id="projCost">$4.00</strong> • Similar-click pipeline: <strong id="projPipe">$12,000</strong> • Close rate: <strong id="projClose">21%</strong> • Est. revenue: <strong id="projRev">$2,520</strong>
        </p>
        <p class="explain">In client builds, we replace these with your real ad platform + CRM numbers to report ROI by channel, campaign, ad, and keyword.</p>
      </div>
    </section>

    <!-- CTA -->
    <section class="section cta">
      <div>
        <div class="kicker">Next step</div>
        <div class="h2" style="margin:0 0 6px">This is free, real-time data. Connect your stack and get the full ROI picture.</div>
        <p class="muted" style="margin:0">We wire this directly into Salesforce + your ad platforms so finance, marketing, and sales see the same truth.</p>
      </div>
      <!-- TODO: replace href with your booking link -->
      <a class="btn" href="https://calendly.com/crmhacker_jonathan" target="_blank" rel="noopener">Book an ROI Strategy Call</a>
    </section>

    <!-- Utility Actions -->
    <section class="section grid cols-2">
      <button class="btn secondary" id="downloadPdfBtn">Download this report as PDF</button>
      <!-- TODO: If you later add a webhook, you can swap this to “Email me my report” -->
      <a class="btn secondary" href="#" onclick="window.scrollTo({top:0,behavior:'smooth'})">Back to top</a>
    </section>

    <div class="footer">
      <div class="callout">
        <strong>Transparency:</strong> This demo shows what’s possible with public, free signals. Corporate identification and deeper intent typically require paid enrichment or first-party data integration. Always disclose tracking in your privacy policy.
      </div>
      <p class="muted" style="margin-top:8px">© <span id="brandName">CRM Hacker</span>. All rights reserved.</p>
    </div>
  </main>

  <script>
    // ======== BRAND CONFIG (edit) ========
    const BRAND = {
      name: "CRM Hacker",                      // TODO: your brand
      heroLine: "From Click → Closed: watch your own data populate in real time.",
      ctaUrl: "https://calendly.com/crmhacker_jonathan" // TODO: your CTA link
    };
    document.getElementById("brandName").textContent = BRAND.name;

    // ======== Param helpers ========
    const COMMON_PARAMS = [
      "utm_source","utm_medium","utm_campaign","utm_content","utm_term",
      "gclid","fbclid","msclkid","ttclid","li_fat_id"
    ];

    function getParams(){
      const url = new URL(window.location.href);
      return Object.fromEntries(url.searchParams.entries());
    }

    function persistParams(){
      const p = getParams();
      const existing = JSON.parse(sessionStorage.getItem("params")||"{}");
      const merged = {...existing};
      COMMON_PARAMS.forEach(k => { if(p[k]) merged[k] = p[k]; });
      merged.landingUrl = window.location.href;
      sessionStorage.setItem("params", JSON.stringify(merged));
      return merged;
    }

    function getReferrer(){
      return document.referrer || "(direct / none)";
    }

    // ======== Device info ========
    function deviceInfo(){
      const ua = navigator.userAgent;
      const isMobile = /Mobi|Android/i.test(ua);
      const os = /Windows NT/i.test(ua) ? "Windows" :
                 /Mac OS X/i.test(ua) ? "macOS" :
                 /Android/i.test(ua) ? "Android" :
                 /iPhone|iPad|iPod/i.test(ua) ? "iOS" :
                 /Linux/i.test(ua) ? "Linux" : "Other";
      const browser = /Chrome/i.test(ua) && !/Edg/i.test(ua) ? "Chrome" :
                      /Edg/i.test(ua) ? "Edge" :
                      /Firefox/i.test(ua) ? "Firefox" :
                      /Safari/i.test(ua) && !/Chrome/i.test(ua) ? "Safari" :
                      /Opera|OPR/i.test(ua) ? "Opera" : "Other";
      const screenSize = `${window.screen.width}×${window.screen.height}`;
      return { type: isMobile ? "Mobile" : "Desktop", os, browser, screen: screenSize, ua };
    }

    // ======== Geo lookup (free) ========
    async function geoLookup(){
      try{
        const r = await fetch("https://ipapi.co/json/");
        if(r.ok){
          const j = await r.json();
          return {
            ip: j.ip || null,
            city: j.city || null,
            region: j.region || null,
            country: j.country_name || j.country || null,
            org: j.org || j.asn || null
          };
        }
        throw new Error("ipapi failed");
      }catch(e){
        try{
          const r2 = await fetch("https://ipinfo.io/json?token="); // no token → limited fields
          if(r2.ok){
            const j2 = await r2.json();
            return {
              ip: j2.ip || null,
              city: j2.city || null,
              region: j2.region || null,
              country: j2.country || null,
              org: j2.org || null
            };
          }
        }catch(e2){}
      }
      return { ip:null, city:null, region:null, country:null, org:null };
    }

    // ======== Session metrics ========
    const sessionMetrics = { start: Date.now(), scrollMax: 0, pageviews: 1 };
    (function initPV(){
      const key="pv"; const cur=Number(sessionStorage.getItem(key)||"0")+1;
      sessionStorage.setItem(key,String(cur)); sessionMetrics.pageviews = cur;
    })();
    window.addEventListener("scroll", ()=>{
      const depth = Math.round(100 * (window.scrollY + window.innerHeight) / document.body.scrollHeight);
      sessionMetrics.scrollMax = Math.min(100, Math.max(sessionMetrics.scrollMax, depth));
      renderSession();
    });
    setInterval(renderSession, 1000);

    // ======== Campaign grouping (simple example) ========
    function campaignGrouping(params){
      const src = (params.utm_source||"").toLowerCase();
      const med = (params.utm_medium||"").toLowerCase();
      if(params.gclid) return "google-ads";
      if(params.fbclid) return "meta-ads";
      if(params.msclkid) return "microsoft-ads";
      if(params.li_fat_id) return "linkedin-ads";
      if(src.includes("linkedin")) return "linkedin";
      if(src.includes("google")) return "google-organic/other";
      if(src.includes("newsletter")||med==="email") return "email";
      if(!src && !document.referrer) return "direct";
      return `${src||"unknown"}-${med||"unknown"}`;
    }

    // ======== Renderers ========
    function setText(id,val){ const el=document.getElementById(id); if(el) el.textContent = val ?? "—"; }

    function renderAcq(params){
      setText("referrer", getReferrer());
      setText("landingUrl", params.landingUrl || window.location.href);
      ["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","fbclid","msclkid","ttclid","li_fat_id"]
        .forEach(k => setText(k, params[k] || "—"));
      setText("campaignGroup", campaignGrouping(params));
    }

    function renderDevice(d){
      setText("deviceType", d.type); setText("os", d.os); setText("browser", d.browser);
      setText("screen", d.screen); setText("ua", d.ua);
    }

    function renderGeo(g){
      setText("ip", g.ip); setText("city", g.city); setText("region", g.region);
      setText("country", g.country); setText("org", g.org);
    }

    function renderSession(){
      const elapsed = Math.round((Date.now() - sessionMetrics.start)/1000);
      setText("timeOnPage", `${elapsed}s`);
      setText("scrollDepth", `${sessionMetrics.scrollMax}%`);
      setText("pageviews", String(sessionMetrics.pageviews));
    }

    // ======== PDF export ========
    async function downloadPDF(){
      const el = document.querySelector("main");
      const canvas = await html2canvas(el);
      const imgData = canvas.toDataURL("image/png");
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF({ orientation:"p", unit:"pt", format:"a4" });
      const pageW = pdf.internal.pageSize.getWidth();
      const pageH = pdf.internal.pageSize.getHeight();
      const margin = 24;
      const imgW = pageW - margin*2;
      const ratio = canvas.height / canvas.width;
      const imgH = imgW * ratio;
      pdf.text("Live ROI Tracking Demo", margin, 28);
      // If long page, add multiple slices
      if(imgH <= pageH - 60){
        pdf.addImage(imgData, "PNG", margin, 40, imgW, imgH);
      } else {
        // slice vertically
        const sliceH = pageH - 80;
        let y = 0;
        let page = 0;
        while(y < canvas.height){
          const slice = document.createElement("canvas");
          slice.width = canvas.width;
          slice.height = Math.min(sliceH * canvas.width / imgW, canvas.height - y);
          const ctx = slice.getContext("2d");
          ctx.drawImage(canvas, 0, y, canvas.width, slice.height, 0, 0, slice.width, slice.height);
          const img = slice.toDataURL("image/png");
          if(page>0) pdf.addPage();
          pdf.addImage(img, "PNG", margin, 40, imgW, (slice.height / canvas.width) * imgW);
          y += slice.height;
          page++;
        }
      }
      pdf.save("Live_Tracking_Report.pdf");
    }

    document.getElementById("downloadPdfBtn").addEventListener("click", downloadPDF);

    // ======== Init ========
    (async function init(){
      const params = persistParams();
      const d = deviceInfo();
      const g = await geoLookup();

      renderAcq(params);
      renderDevice(d);
      renderGeo(g);
      renderSession();

      // Populate demo projection (keep obvious that these are sample values)
      const cost = 4.00, pipe=12000, close=0.21, rev=Math.round(pipe*close);
      document.getElementById("projCost").textContent = `$${cost.toFixed(2)}`;
      document.getElementById("projPipe").textContent = `$${pipe.toLocaleString()}`;
      document.getElementById("projClose").textContent = `${Math.round(close*100)}%`;
      document.getElementById("projRev").textContent = `$${rev.toLocaleString()}`;
    })();
  </script>
</body>
</html>
