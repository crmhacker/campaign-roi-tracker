<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CRM Hacker — Live ROI Tracking Demo</title>
<meta name="theme-color" content="#15a3d4" />
<meta name="description" content="See your UTMs, device, geo, engagement — then how CRM Hacker maps it to Salesforce and proves campaign ROI." />

<style>
  :root{
    /* CRM Hacker light theme with teal accents + optional red for highlights */
    --bg:#ffffff; --text:#0f172a; --muted:#475569; --line:#e2e8f0; --card:#ffffff;
    --brand:#15a3d4; --brand2:#06b6d4; --highlight:#e11d2e; /* red from logo */
    --shadow:0 8px 24px rgba(15,23,42,.06); --radius:14px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
  img{max-width:100%;height:auto;display:block}

  .container{max-width:1200px;margin:0 auto;padding:clamp(14px,2vw,28px)}

  /* HEADER */
  .hero{
    background:
      radial-gradient(900px 300px at 20% -10%, rgba(21,163,212,.12), transparent 60%),
      radial-gradient(700px 280px at 80% -10%, rgba(6,182,212,.10), transparent 60%),
      var(--bg);
    border-bottom:1px solid var(--line);
  }
  .hero-inner{display:flex;gap:18px;align-items:center;padding:26px 0;flex-wrap:wrap}
  .brand{display:flex;align-items:center;gap:14px;border:1px solid var(--line);background:#fff;border-radius:12px;padding:10px 12px}
  .logoBox{width:58px;height:58px;border-radius:12px;display:grid;place-items:center;overflow:hidden;background:#000;box-shadow:var(--shadow)}
  .logoBox img{width:100%;height:100%;object-fit:contain;background:#000}
  h1{font-size:clamp(24px,4vw,40px);line-height:1.1;margin:0 0 6px}
  .sub{color:var(--muted);margin:0}

  /* SECTIONS */
  .section{margin:28px 0}
  .section-title{display:flex;align-items:flex-end;justify-content:space-between;gap:12px;margin-bottom:10px}
  .kicker{font-size:12px;letter-spacing:.12em;text-transform:uppercase;color:var(--muted)}
  .h2{font-size:22px;margin:2px 0 0}
  .lead{color:var(--muted);margin:8px 0 0}
  .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow)}

  /* TILES (autosize to content; compact) */
  .tiles{display:grid;gap:10px}
  @media(min-width:1040px){.tiles.cols-4{grid-template-columns:repeat(4,1fr)}}
  @media(min-width:680px) and (max-width:1039px){.tiles.cols-4{grid-template-columns:repeat(2,1fr)}}
  @media(max-width:679px){.tiles.cols-4{grid-template-columns:1fr}}
  .tile{background:#fff;border:1px solid var(--line);border-radius:12px;padding:10px;box-shadow:var(--shadow)}
  .tile h3{font-size:14px;margin:0 0 6px}
  .kv{display:block;border:1px dashed var(--line);padding:8px 10px;border-radius:10px;background:#fafcff}
  .kv label{display:inline-block;color:var(--muted);font-size:11px;margin-bottom:6px}
  /* IMPORTANT: show full values — wrap, never ellipsis */
  .kv code{
    display:block;
    font-family:ui-monospace,SFMono-Regular,Menlo,monospace;
    background:#f8fafc;border:1px solid var(--line);padding:6px 8px;border-radius:8px;
    white-space:normal; overflow:visible; text-overflow:clip; word-break:break-all;
  }
  .why{font-size:11px;color:var(--muted);margin-top:6px;line-height:1.55}

  /* FLOW & CTA */
  .flow{display:grid;gap:10px;margin-top:6px}
  @media(min-width:900px){.flow{grid-template-columns:repeat(5,1fr)}}
  .step{position:relative;padding:12px;border:1px solid var(--line);border-radius:12px;background:#fff;box-shadow:var(--shadow)}
  .step:after{content:"→";position:absolute;right:-10px;top:50%;transform:translateY(-50%);color:#94a3b8}
  .step:last-child:after{display:none}
  .sm{font-size:12px;color:var(--muted)}
  .cta{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;background:#f7fdff;border:1px solid var(--line);border-radius:12px;padding:14px}
  .btn{background:var(--brand);color:#fff;border:none;border-radius:10px;padding:10px 14px;font-weight:800;cursor:pointer;box-shadow:var(--shadow);text-decoration:none;display:inline-block}
  .btn.secondary{background:#fff;color:#0f172a;border:1px solid var(--line)}

  /* CHARTS */
  .chart-grid{display:grid;gap:12px}
  @media(min-width:980px){.chart-grid.cols-3{grid-template-columns:2fr 1fr 1fr}}
  .card canvas{width:100% !important;height:220px !important;display:block}
  @media(max-width:480px){.card canvas{height:170px !important}}

  /* Salesforce-ish */
  .sf-tabs{display:flex;gap:8px}
  .sf-tab{background:#fff;border:1px solid var(--line);padding:8px 12px;border-radius:10px;cursor:pointer}
  .sf-tab.active{border-color:var(--brand);box-shadow:0 0 0 2px rgba(21,163,212,.15)}
  .sf-pane{margin-top:8px}
  .sf-record { border:1px solid var(--line); border-radius:12px; overflow:hidden; box-shadow:var(--shadow); }
  .sf-bar { background:#f3f6f9; border-bottom:1px solid var(--line); padding:10px 14px; display:flex; align-items:center; justify-content:space-between; }
  .sf-bar .title { font-weight:800; }
  .sf-badge{font-size:11px;background:#eef7fb;border:1px solid var(--line);padding:4px 8px;border-radius:999px;color:var(--muted)}
  .sf-highlights { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; padding:12px; background:#fff; border-bottom:1px solid var(--line); }
  @media(max-width:800px){ .sf-highlights{ grid-template-columns:1fr 1fr; } }
  .sf-kv { border:1px solid var(--line); border-radius:10px; padding:10px; }
  .sf-kv label{display:block;font-size:11px;color:var(--muted);margin-bottom:4px}
  .sf-tabsbar { display:flex; gap:8px; padding:10px 12px; background:#fff; border-bottom:1px solid var(--line); }
  .sf-tabbtn { background:#fff; border:1px solid var(--line); border-radius:10px; padding:8px 12px; cursor:pointer; }
  .sf-tabbtn.active { border-color:var(--brand); box-shadow:0 0 0 2px rgba(21,163,212,.15); }
  .sf-section { padding:12px; background:#fff; }
  .sf-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
  @media(max-width:700px){.sf-grid{grid-template-columns:1fr}}
  .sf-field{background:#fff;border:1px solid var(--line);border-radius:10px;padding:10px;box-shadow:var(--shadow)}
  .sf-field label{display:block;font-size:11px;color:var(--muted);margin-bottom:4px}

  .notice{background:#f8fafc;border:1px solid var(--line);border-radius:12px;padding:10px}
  .footer{color:var(--muted);font-size:12px;margin:24px 0}
</style>

<!-- CDNs -->
<script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body>
<header class="hero">
  <div class="container hero-inner">
    <div class="brand">
      <div class="logoBox">
        <!-- Put crm-hacker-logo.png next to this file -->
        <img src="crm-hacker-logo.png" alt="CRM Hacker" />
      </div>
      <div>
        <div style="font-weight:800">CRM Hacker</div>
        <div class="sub">Salesforce & RevOps done right</div>
      </div>
    </div>
    <div>
      <h1>From click → closed: watch your data populate in real time.</h1>
      <p class="sub">A quiet, clear view of what we track — and how we turn it into Salesforce revenue reporting.</p>
    </div>
  </div>
</header>

<main class="container">

  <div class="notice">We capture URL params (UTMs & click IDs), referrer, device, IP geo, and on-page engagement using only free sources. Toggle demo enrichment with <code>?demo_enrich=1</code>.</div>

  <!-- ACQUISITION -->
  <section class="section">
    <div class="section-title"><div><div class="kicker">Acquisition & Attribution</div><h2 class="h2">Where did this click come from?</h2></div></div>
    <p class="lead">These fields power channel/campaign/keyword ROI and platform de-dupe.</p>

    <div class="tiles cols-4" style="margin-top:10px">
      <div class="tile">
        <h3>Referrer</h3>
        <div class="kv"><label>value</label><code id="referrer">—</code></div>
        <p class="why"><strong>Why:</strong> Distinguish paid, organic, partner, direct. <strong>Do:</strong> Use for channel grouping & “direct” audits.</p>
      </div>
      <div class="tile">
        <h3>Landing URL</h3>
        <div class="kv"><label>value</label><code id="landingUrl">—</code></div>
        <p class="why"><strong>Why:</strong> Persist UTMs across pages/sessions. <strong>Do:</strong> Log on Lead for audit/BI.</p>
      </div>
      <div class="tile">
        <h3>utm_source</h3>
        <div class="kv"><label>value</label><code id="utm_source">—</code></div>
        <p class="why"><strong>Why:</strong> Channel (google, linkedin…). <strong>Do:</strong> Normalize to your channel taxonomy.</p>
      </div>
      <div class="tile">
        <h3>utm_medium</h3>
        <div class="kv"><label>value</label><code id="utm_medium">—</code></div>
        <p class="why"><strong>Why:</strong> cpc, social, email. <strong>Do:</strong> Standardize for clean ROI by medium.</p>
      </div>
      <div class="tile">
        <h3>utm_campaign</h3>
        <div class="kv"><label>value</label><code id="utm_campaign">—</code></div>
        <p class="why"><strong>Why:</strong> Budget & goals at campaign. <strong>Do:</strong> Shift spend by ROI.</p>
      </div>
      <div class="tile">
        <h3>utm_content</h3>
        <div class="kv"><label>value</label><code id="utm_content">—</code></div>
        <p class="why"><strong>Why:</strong> Creative/variant ID. <strong>Do:</strong> A/B test winners → scale.</p>
      </div>
      <div class="tile">
        <h3>utm_term</h3>
        <div class="kv"><label>value</label><code id="utm_term">—</code></div>
        <p class="why"><strong>Why:</strong> Keyword. <strong>Do:</strong> Negatives/expansion by ROI.</p>
      </div>
      <div class="tile">
        <h3>Click IDs</h3>
        <div class="kv"><label>gclid</label><code id="gclid">—</code></div>
        <div class="kv" style="margin-top:6px"><label>fbclid</label><code id="fbclid">—</code></div>
        <div class="kv" style="margin-top:6px"><label>msclkid</label><code id="msclkid">—</code></div>
        <div class="kv" style="margin-top:6px"><label>ttclid</label><code id="ttclid">—</code></div>
        <div class="kv" style="margin-top:6px"><label>li_fat_id</label><code id="li_fat_id">—</code></div>
        <p class="why"><strong>Why:</strong> Join keys for offline conversions & lift. <strong>Do:</strong> Push back to ad platforms.</p>
      </div>
      <div class="tile">
        <h3>Campaign Group</h3>
        <div class="kv"><label>value</label><code id="campaignGroup">—</code></div>
        <p class="why"><strong>Why:</strong> Auto-bucket source. <strong>Do:</strong> Quick channel dashboards.</p>
      </div>
    </div>
  </section>

  <!-- DEVICE -->
  <section class="section">
    <div class="section-title"><div><div class="kicker">Device & Environment</div><h2 class="h2">How are they experiencing your page?</h2></div></div>
    <div class="tiles cols-4" style="margin-top:10px">
      <div class="tile"><h3>Device Type</h3><div class="kv"><label>value</label><code id="deviceType">—</code></div><p class="why"><strong>Why:</strong> Mobile vs desktop. <strong>Do:</strong> Mobile-first CRO on mobile-heavy sources.</p></div>
      <div class="tile"><h3>OS</h3><div class="kv"><label>value</label><code id="os">—</code></div><p class="why"><strong>Why:</strong> QA & specs. <strong>Do:</strong> Fix OS-specific bugs.</p></div>
      <div class="tile"><h3>Browser</h3><div class="kv"><label>value</label><code id="browser">—</code></div><p class="why"><strong>Why:</strong> Rendering quirks. <strong>Do:</strong> Safari fixes.</p></div>
      <div class="tile"><h3>Screen</h3><div class="kv"><label>value</label><code id="screen">—</code></div><p class="why"><strong>Why:</strong> Above-the-fold. <strong>Do:</strong> Resize hero for common screens.</p></div>
      <div class="tile" style="grid-column:span 4"><h3>User Agent</h3><div class="kv"><label>value</label><code id="ua">—</code></div><p class="why"><strong>Why:</strong> Debug & client hints. <strong>Do:</strong> Support triage.</p></div>
    </div>
  </section>

  <!-- GEO -->
  <section class="section">
    <div class="section-title"><div><div class="kicker">Geo & Org</div><h2 class="h2">Where is this click coming from?</h2></div></div>
    <div class="tiles cols-4" style="margin-top:10px">
      <div class="tile"><h3>IP</h3><div class="kv"><label>value</label><code id="ip">—</code></div><p class="why"><strong>Why:</strong> Fraud/geo joins. <strong>Do:</strong> Block suspicious ranges.</p></div>
      <div class="tile"><h3>City</h3><div class="kv"><label>value</label><code id="city">—</code></div><p class="why"><strong>Why:</strong> Localization. <strong>Do:</strong> Region-based offers.</p></div>
      <div class="tile"><h3>Region</h3><div class="kv"><label>value</label><code id="region">—</code></div><p class="why"><strong>Why:</strong> Territory routing. <strong>Do:</strong> Assign to correct AE.</p></div>
      <div class="tile"><h3>Country</h3><div class="kv"><label>value</label><code id="country">—</code></div><p class="why"><strong>Why:</strong> Compliance & pricing. <strong>Do:</strong> Geo pricing.</p></div>
      <div class="tile"><h3>Org / ASN</h3><div class="kv"><label>value</label><code id="org">—</code></div><p class="why"><strong>Why:</strong> Sometimes shows corporate network. <strong>Do:</strong> Helpful hint for ABM routing.</p></div>

      <div class="tile" style="grid-column:span 4">
        <h3>Confidence</h3>
        <div class="kv"><label>note</label><code>Org ≈ ISP unless the visitor is on a corporate network</code></div>
        <p class="why"><strong>Why:</strong> Free IP data is imperfect. <strong>Do:</strong> For firmographics/intent, enable paid enrichment (Clearbit/6sense/etc.).</p>
      </div>
    </div>
  </section>

  <!-- ENRICHMENT DEMO -->
  <section class="section">
    <div class="section-title"><div><div class="kicker">Enterprise Enrichment (demo)</div><h2 class="h2">Turn anonymous visits into account insights</h2></div></div>
    <div class="card">
      <p class="lead" style="margin-top:0">Use <code>?demo_enrich=1</code> in the URL to simulate Clearbit/6sense-style firmographics & intent (no paid API).</p>
      <div class="tiles cols-4" style="margin-top:8px">
        <div class="tile"><h3>Company</h3><div class="kv"><label>value</label><code id="enrich_company">—</code></div><p class="why"><strong>Why:</strong> Account match. <strong>Do:</strong> Route to owning team.</p></div>
        <div class="tile"><h3>Domain</h3><div class="kv"><label>value</label><code id="enrich_domain">—</code></div><p class="why"><strong>Why:</strong> Dedupe/merge. <strong>Do:</strong> Web-to-Lead stamping.</p></div>
        <div class="tile"><h3>Industry</h3><div class="kv"><label>value</label><code id="enrich_industry">—</code></div><p class="why"><strong>Why:</strong> ICP fit. <strong>Do:</strong> Talk tracks by vertical.</p></div>
        <div class="tile"><h3>Employees</h3><div class="kv"><label>value</label><code id="enrich_employees">—</code></div><p class="why"><strong>Why:</strong> Tiering. <strong>Do:</strong> Territory assignment.</p></div>
        <div class="tile"><h3>Est. Revenue</h3><div class="kv"><label>value</label><code id="enrich_revenue">—</code></div><p class="why"><strong>Why:</strong> TAM. <strong>Do:</strong> Deal sizing.</p></div>
        <div class="tile"><h3>Technologies</h3><div class="kv"><label>value</label><code id="enrich_tech">—</code></div><p class="why"><strong>Why:</strong> Stack fit. <strong>Do:</strong> Position integrations.</p></div>
        <div class="tile"><h3>Intent Topics</h3><div class="kv"><label>value</label><code id="enrich_intent">—</code></div><p class="why"><strong>Why:</strong> Hot topics. <strong>Do:</strong> Trigger campaigns.</p></div>
        <div class="tile"><h3>Confidence</h3><div class="kv"><label>value</label><code id="enrich_conf">—</code></div><p class="why"><strong>Why:</strong> Match quality. <strong>Do:</strong> Gate routing/alerts.</p></div>
      </div>
      <div class="notice" style="margin-top:10px">
        <strong>How we’d use this:</strong> Map Domain→Account; stamp firmographics on Lead/Contact; attach intent topics to Campaign Members; push account scoring & routing; populate SF reports.<br/>
        <a class="btn secondary" id="enrichToggleBtn" href="#">Toggle demo on/off</a>
      </div>
    </div>
  </section>

  <!-- ENGAGEMENT -->
  <section class="section">
    <div class="section-title"><div><div class="kicker">Engagement</div><h2 class="h2">Are they actually engaging?</h2></div></div>
    <div class="tiles cols-4" style="margin-top:10px">
      <div class="tile"><h3>Time on Page</h3><div class="kv"><label>value</label><code id="timeOnPage">0s</code></div><p class="why"><strong>Why:</strong> Intent proxy. <strong>Do:</strong> Nudges, MQL scoring.</p></div>
      <div class="tile"><h3>Scroll Depth</h3><div class="kv"><label>value</label><code id="scrollDepth">0%</code></div><p class="why"><strong>Why:</strong> Content resonance. <strong>Do:</strong> Promote winners.</p></div>
      <div class="tile"><h3>Pageviews (session)</h3><div class="kv"><label>value</label><code id="pageviews">1</code></div><p class="why"><strong>Why:</strong> Research behavior. <strong>Do:</strong> Trigger SDR alerts.</p></div>
    </div>
  </section>

  <!-- DASHBOARDS -->
  <section class="section">
    <div class="section-title"><div><div class="kicker">Dashboards</div><h2 class="h2">Quick visuals (GA-style)</h2></div></div>
    <div class="chart-grid cols-3">
      <div class="card"><div class="kicker">Source Grouping</div><canvas id="sourceDonut"></canvas><p class="sub">Buckets by UTMs/click IDs.</p></div>
      <div class="card"><div class="kicker">Device & OS</div><canvas id="deviceBar"></canvas><p class="sub">Your environment vs example mix.</p></div>
      <div class="card"><div class="kicker">Engagement (this visit)</div><canvas id="engageLine"></canvas><p class="sub">Seconds on page & scroll.</p></div>
    </div>
  </section>

  <!-- SALESFORCE PREVIEW -->
  <section class="section">
    <div class="section-title"><div><div class="kicker">Salesforce Preview</div><h2 class="h2">What this looks like inside Salesforce</h2></div></div>

    <div class="sf-tabs card" style="margin-bottom:10px">
      <button class="sf-tab active" data-tab="leadTab">Lead</button>
      <button class="sf-tab" data-tab="cmTab">Campaign Member</button>
      <button class="sf-tab" data-tab="oppTab">Opportunity</button>
      <button class="sf-tab" data-tab="reportsTab">Reports & ROI</button>
    </div>

    <!-- Lead -->
    <div id="leadTab" class="sf-pane">
      <div class="sf-record">
        <div class="sf-bar"><div class="title">Lead • <span id="sfLeadName">—</span></div><span class="sf-badge">Sample</span></div>
        <div class="sf-highlights">
          <div class="sf-kv"><label>Company</label><div id="sfLeadCompany">—</div></div>
          <div class="sf-kv"><label>Email</label><div id="sfLeadEmail">—</div></div>
          <div class="sf-kv"><label>Lead Source</label><div id="sfLeadSource">—</div></div>
          <div class="sf-kv"><label>UTM Source</label><div id="sfUtmSource">—</div></div>
          <div class="sf-kv"><label>UTM Medium</label><div id="sfUtmMedium">—</div></div>
          <div class="sf-kv"><label>UTM Campaign</label><div id="sfUtmCampaign">—</div></div>
        </div>
        <div class="sf-tabsbar">
          <button class="sf-tabbtn active" data-tab="lead-details">Details</button>
          <button class="sf-tabbtn" data-tab="lead-capture">Capture Data</button>
        </div>
        <div id="lead-details" class="sf-section">
          <div class="sf-grid">
            <div class="sf-field"><label>Lead Source Detail</label><div id="sfLeadSourceDetail">—</div></div>
            <div class="sf-field"><label>Click IDs</label><div id="sfClickIds">—</div></div>
            <div class="sf-field"><label>Device</label><div id="sfDevice">—</div></div>
            <div class="sf-field"><label>Geo</label><div id="sfGeo">—</div></div>
            <div class="sf-field"><label>Created Date</label><div id="sfCreated">—</div></div>
            <div class="sf-field"><label>Owner</label><div>CRM Hacker (Queue)</div></div>
          </div>
        </div>
        <div id="lead-capture" class="sf-section" hidden>
          <div class="sf-grid">
            <div class="sf-field"><label>Referrer</label><div id="referrer_cap">—</div></div>
            <div class="sf-field"><label>Landing URL</label><div id="landing_cap">—</div></div>
            <div class="sf-field" style="grid-column:span 2"><label>User Agent</label><div id="ua_cap">—</div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Campaign Member -->
    <div id="cmTab" class="sf-pane" hidden>
      <div class="sf-record">
        <div class="sf-bar"><div class="title">Campaign Member • <span id="sfCmName">—</span></div><span class="sf-badge">Sample</span></div>
        <div class="sf-section">
          <div class="sf-grid">
            <div class="sf-field"><label>Campaign</label><div id="sfCampaign">—</div></div>
            <div class="sf-field"><label>Member Status</label><div id="sfMemberStatus">Responded</div></div>
            <div class="sf-field"><label>Touch Role</label><div id="sfTouchRole">Last Touch</div></div>
            <div class="sf-field"><label>Attribution %</label><div id="sfAttribPct">100%</div></div>
            <div class="sf-field"><label>Account (ABM)</label><div id="sfAccount">—</div></div>
            <div class="sf-field" style="grid-column:span 2"><label>UTM/CIDs Snapshot</label><div id="sfCmUtms">—</div></div>
          </div>
          <p class="sub" style="margin-top:6px">Multi-touch: each touch stored as a Campaign Member with UTMs/Click IDs; % credit allocated by model (FT/LT/Linear/W-shape).</p>
        </div>
      </div>
    </div>

    <!-- Opportunity -->
    <div id="oppTab" class="sf-pane" hidden>
      <div class="sf-record">
        <div class="sf-bar"><div class="title">Opportunity • <span id="sfOppName">—</span></div><span class="sf-badge">Sample</span></div>
        <div class="sf-section">
          <div class="sf-grid">
            <div class="sf-field"><label>Account</label><div id="sfOppAccount">—</div></div>
            <div class="sf-field"><label>Amount</label><div id="sfOppAmount">$25,000</div></div>
            <div class="sf-field"><label>Stage</label><div id="sfOppStage">Negotiation/Review</div></div>
            <div class="sf-field"><label>Primary Campaign Source</label><div id="sfPrimaryCampaign">—</div></div>
            <div class="sf-field"><label>Model: Last Touch</label><div id="sfLT">$—</div></div>
            <div class="sf-field"><label>Model: First Touch</label><div id="sfFT">$—</div></div>
            <div class="sf-field"><label>Model: Linear</label><div id="sfLIN">$—</div></div>
            <div class="sf-field"><label>Model: W-Shaped</label><div id="sfW">$—</div></div>
          </div>
          <p class="sub" style="margin-top:6px">Campaign Influence / custom logic for ABM moves Campaign Members onto the Opp. Models allocate attributed revenue across touches.</p>
        </div>
      </div>
    </div>

    <!-- Reports -->
    <div id="reportsTab" class="sf-pane" hidden>
      <div class="sf-record">
        <div class="sf-bar"><div class="title">Reports • Campaign ROI (Samples)</div><span class="sf-badge">Sample</span></div>
        <div class="sf-section">
          <div class="tiles cols-4">
            <div class="tile" style="grid-column:span 2">
              <h3>ROI by Campaign (table)</h3>
              <div class="kv" style="border:none;padding:0">
                <table style="width:100%;border-collapse:collapse;font-size:14px">
                  <thead>
                    <tr style="color:var(--muted)">
                      <th style="text-align:left;border-bottom:1px solid var(--line);padding:6px">Campaign</th>
                      <th style="text-align:left;border-bottom:1px solid var(--line);padding:6px">Spend</th>
                      <th style="text-align:left;border-bottom:1px solid var(--line);padding:6px">Pipeline $</th>
                      <th style="text-align:left;border-bottom:1px solid var(--line);padding:6px">Revenue $</th>
                      <th style="text-align:left;border-bottom:1px solid var(--line);padding:6px">ROI %</th>
                      <th style="text-align:left;border-bottom:1px solid var(--line);padding:6px">Model</th>
                    </tr>
                  </thead>
                  <tbody id="roiTableBody"></tbody>
                </table>
              </div>
            </div>
            <div class="tile">
              <h3>Revenue by Model</h3>
              <canvas id="modelBar"></canvas>
            </div>
            <div class="tile">
              <h3>Touches per Opp</h3>
              <canvas id="touchDist"></canvas>
            </div>
          </div>
          <div class="notice" style="margin-top:10px">
            <strong>ROI Formula:</strong> <code>(Attributed Revenue − Campaign Spend) ÷ Campaign Spend</code> → ROI%.<br/>
            <strong>Spend:</strong> Ad cost + media fees (+ optional SDR/AE cost). <strong>Revenue:</strong> closed-won amount × attribution share.
          </div>
        </div>
      </div>
    </div>

  </section>

  <!-- JOURNEY -->
  <section class="section">
    <div class="section-title"><div><div class="kicker">From Click to Revenue</div><h2 class="h2">How this connects to ROI</h2></div></div>
    <div class="flow">
      <div class="step"><strong>1) Ad Click</strong><br><span class="sm">UTMs + click IDs captured</span></div>
      <div class="step"><strong>2) Web Session</strong><br><span class="sm">Device • Geo • Engagement</span></div>
      <div class="step"><strong>3) Lead</strong><br><span class="sm">Form + enrichment</span></div>
      <div class="step"><strong>4) Pipeline</strong><br><span class="sm">Opp with influence</span></div>
      <div class="step"><strong>5) Revenue</strong><br><span class="sm">ROI by model</span></div>
    </div>
    <div class="card" style="margin-top:10px">
      <div class="kicker">Sample Projection (demo)</div>
      <p class="sub">Click est. cost: <strong id="projCost">$4.00</strong> • Similar-click pipeline: <strong id="projPipe">$12,000</strong> • Close rate: <strong id="projClose">21%</strong> • Est. revenue: <strong id="projRev">$2,520</strong></p>
    </div>
  </section>

  <!-- CTA + UTILS -->
  <section class="section cta">
    <div>
      <div class="kicker">Next step</div>
      <div class="h2" style="margin:0 0 6px">Connect your stack and get the full ROI picture.</div>
      <p class="sub" style="margin:0">We wire this into Salesforce + ad platforms so marketing, sales, and finance share one truth.</p>
    </div>
    <a class="btn" href="https://calendly.com/crmhacker_jonathan" target="_blank" rel="noopener">Book an ROI Strategy Call</a>
  </section>

  <section class="section tiles cols-4">
    <button class="btn secondary" id="downloadPdfBtn">Download as PDF</button>
    <a class="btn secondary" href="#" onclick="window.scrollTo({top:0,behavior:'smooth'})">Back to top</a>
  </section>

  <div class="footer">
    <div class="notice"><strong>Transparency:</strong> This demo uses public signals (UTMs, referrer, device, IP geo, on-page behavior). Corporate identification and deeper intent typically require paid enrichment or first-party integrations. Update your privacy policy accordingly.</div>
    <p class="sub" style="margin-top:8px">© CRM Hacker. All rights reserved.</p>
  </div>

</main>

<script>
/* ===== SAFE HELPERS ===== */
const SAFE = {
  $: (id) => document.getElementById(id),
  set: (id, v) => { const el = SAFE.$(id); if (el) el.textContent = (v ?? "—"); },
  on: (id, evt, fn) => { const el = SAFE.$(id); if (el && el.addEventListener) el.addEventListener(evt, fn); },
  warn: (...a) => console.warn("[ROI-DEMO]", ...a),
  err:  (...a) => console.error("[ROI-DEMO]", ...a),
};
window.addEventListener("error", (e) => SAFE.err("window error:", e.message));
window.addEventListener("unhandledrejection", (e) => SAFE.err("unhandled promise:", e.reason));

/* ===== UTM PARSING ===== */
const COMMON_PARAMS = ["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","fbclid","msclkid","ttclid","li_fat_id","demo_enrich"];
function parseQuery(){const out={};const q=location.search.startsWith("?")?location.search.slice(1):location.search;if(!q)return out;for(const part of q.split("&")){if(!part)continue;const[kRaw,vRaw=""]=part.split("=");const k=decodeURIComponent(kRaw||"").trim().toLowerCase();const v=decodeURIComponent(vRaw||"").trim();if(k)out[k]=v;}return out;}
function persistParams(){const p=parseQuery();const prev=JSON.parse(sessionStorage.getItem("params")||"{}");const next={...prev};for(const k of COMMON_PARAMS) if(p[k]) next[k]=p[k];next.landingUrl=location.href;sessionStorage.setItem("params",JSON.stringify(next));return next;}
function getReferrer(){ return document.referrer || "(direct / none)"; }
function campaignGrouping(params){
  const src=(params.utm_source||"").toLowerCase(), med=(params.utm_medium||"").toLowerCase();
  if(params.gclid) return "google-ads"; if(params.fbclid) return "meta-ads"; if(params.msclkid) return "microsoft-ads"; if(params.li_fat_id) return "linkedin-ads";
  if(src.includes("linkedin")) return "linkedin"; if(src.includes("google")) return "google-other"; if(src.includes("newsletter")||med==="email") return "email";
  if(!src && !document.referrer) return "direct"; return `${src||"unknown"}-${med||"unknown"}`;
}

/* ===== DEVICE INFO ===== */
function deviceInfo(){
  const ua=navigator.userAgent||""; const isMobile=/Mobi|Android/i.test(ua);
  const os=/Windows NT/i.test(ua)?"Windows":/Mac OS X/i.test(ua)?"macOS":/Android/i.test(ua)?"Android":/iPhone|iPad|iPod/i.test(ua)?"iOS":/Linux/i.test(ua)?"Linux":"Other";
  const browser=/Chrome/i.test(ua)&&!/Edg/i.test(ua)?"Chrome":/Edg/i.test(ua)?"Edge":/Firefox/i.test(ua)?"Firefox":/Safari/i.test(ua)&&!/Chrome/i.test(ua)?"Safari":/Opera|OPR/i.test(ua)?"Opera":"Other";
  const screenSize=`${window.screen.width}×${window.screen.height}`;
  return { type:isMobile?"Mobile":"Desktop", os, browser, screen:screenSize, ua };
}

/* ===== GEO (fallbacks + timeout) ===== */
function withTimeout(p,ms=3500){let t;return Promise.race([p,new Promise((_,rej)=>t=setTimeout(()=>rej(new Error("timeout")),ms))]).finally(()=>clearTimeout(t))}
async function geoFromIpapi(){const r=await withTimeout(fetch("https://ipapi.co/json/"),3500);if(!r.ok)throw new Error("ipapi");const j=await r.json();return {ip:j.ip||null,city:j.city||null,region:j.region||null,country:j.country_name||j.country||null,org:j.org||j.asn||null};}
async function geoFromIpwho(){const r=await withTimeout(fetch("https://ipwho.is/"),3500);if(!r.ok)throw new Error("ipwho");const j=await r.json();if(j&&j.success!==false){return {ip:j.ip||null,city:j.city||null,region:j.region||null,country:j.country||null,org:j.connection?.org||null};}throw new Error("ipwho flag");}
async function geoFromGeoJS(){const r=await withTimeout(fetch("https://get.geojs.io/v1/ip/geo.json"),3500);if(!r.ok)throw new Error("geojs");const j=await r.json();return {ip:j.ip||null,city:j.city||null,region:j.region||null,country:j.country||null,org:j.organization_name||null};}
async function ipOnlyIpify(){const r=await withTimeout(fetch("https://api.ipify.org?format=json"),3500);if(!r.ok)throw new Error("ipify");const j=await r.json();return {ip:j.ip||null,city:null,region:null,country:null,org:null};}
async function geoLookup(){for(const fn of [geoFromIpapi,geoFromIpwho,geoFromGeoJS,ipOnlyIpify]){try{const g=await fn();if(g)return g;}catch(e){SAFE.warn("geo fallback",e.message)}}return {ip:null,city:null,region:null,country:null,org:null};}

/* ===== SESSION METRICS ===== */
const sessionMetrics={start:Date.now(),scrollMax:0,pageviews:1,timeline:[]};
(function(){try{const key="pv";const cur=Number(sessionStorage.getItem(key)||"0")+1;sessionStorage.setItem(key,String(cur));sessionMetrics.pageviews=cur;}catch(e){SAFE.warn("sessionStorage?",e.message)}})();
window.addEventListener("scroll",()=>{try{const d=Math.round(100*(window.scrollY+window.innerHeight)/document.body.scrollHeight);sessionMetrics.scrollMax=Math.min(100,Math.max(sessionMetrics.scrollMax,d));}catch(e){}});
setInterval(()=>{const t=Math.round((Date.now()-sessionMetrics.start)/1000);sessionMetrics.timeline.push({t,depth:sessionMetrics.scrollMax});renderSession();try{updateEngageChart();}catch(e){}},1000);

/* ===== RENDERERS ===== */
function renderAcq(params){
  SAFE.set("referrer",getReferrer()); SAFE.set("landingUrl",params.landingUrl||location.href);
  ["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","fbclid","msclkid","ttclid","li_fat_id"].forEach(k=>SAFE.set(k,params[k]||"—"));
  const group=campaignGrouping(params); SAFE.set("campaignGroup",group); try{updateSourceDonut(group)}catch(e){}
}
function renderDevice(d){ SAFE.set("deviceType",d.type); SAFE.set("os",d.os); SAFE.set("browser",d.browser); SAFE.set("screen",d.screen); SAFE.set("ua",d.ua);
  SAFE.set("ua_cap",d.ua); }
function renderGeo(g){ SAFE.set("ip",g.ip); SAFE.set("city",g.city); SAFE.set("region",g.region); SAFE.set("country",g.country); SAFE.set("org",g.org); }
function renderSession(){const elapsed=Math.round((Date.now()-sessionMetrics.start)/1000); SAFE.set("timeOnPage",`${elapsed}s`); SAFE.set("scrollDepth",`${sessionMetrics.scrollMax}%`); SAFE.set("pageviews",String(sessionMetrics.pageviews));}

/* ===== CHARTS (wait for Chart.js) ===== */
let sourceDonut,deviceBar,engageLine;
function initCharts(){
  if(!window.Chart){SAFE.warn("Chart.js not available");return;}
  const brand=getComputedStyle(document.documentElement).getPropertyValue('--brand').trim()||'#15a3d4';
  const brand2=getComputedStyle(document.documentElement).getPropertyValue('--brand2').trim()||'#06b6d4';
  try{
    const sd=SAFE.$('sourceDonut'); if(sd){
      sourceDonut=new Chart(sd,{type:'doughnut',data:{labels:['google-ads','linkedin-ads','email','direct','other'],datasets:[{data:[0,0,0,0,1],backgroundColor:[brand,brand2,'#22c55e','#e5e7eb','#cbd5e1']}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}},cutout:'60%'}});
    }
    const db=SAFE.$('deviceBar'); if(db){
      deviceBar=new Chart(db,{type:'bar',data:{labels:['Desktop/Windows','Desktop/macOS','Mobile/iOS','Mobile/Android'],datasets:[{label:'This visit',data:[0,0,0,0],backgroundColor:brand},{label:'Example mix',data:[35,25,20,20],backgroundColor:'#e2e8f0'}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}},scales:{y:{beginAtZero:true,ticks:{stepSize:10}}}}});
    }
    const el=SAFE.$('engageLine'); if(el){
      engageLine=new Chart(el,{type:'line',data:{labels:[],datasets:[{label:'Depth %',data:[],borderColor:brand,tension:.3}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{title:{display:true,text:'Seconds'}},y:{title:{display:true,text:'Scroll depth %'},suggestedMin:0,suggestedMax:100}}}});
    }
  }catch(e){SAFE.err("chart init failed",e);}
}
function updateSourceDonut(group){if(!sourceDonut)return;const map={'google-ads':0,'linkedin-ads':1,'email':2,'direct':3};const idx=map[group]??4;sourceDonut.data.datasets[0].data[idx]+=1;sourceDonut.update();}
function updateDeviceBar(d){if(!deviceBar)return;const idx=(d.type==='Desktop'&&d.os==='Windows')?0:(d.type==='Desktop'&&d.os==='macOS')?1:(d.type==='Mobile'&&d.os==='iOS')?2:(d.type==='Mobile'&&d.os==='Android')?3:0;deviceBar.data.datasets[0].data=[0,0,0,0];deviceBar.data.datasets[0].data[idx]=1;deviceBar.update();}
function updateEngageChart(){if(!engageLine)return;const last=sessionMetrics.timeline[sessionMetrics.timeline.length-1];if(!last)return;engageLine.data.labels.push(last.t);engageLine.data.datasets[0].data.push(last.depth);if(engageLine.data.labels.length>60){engageLine.data.labels.shift();engageLine.data.datasets[0].data.shift();}engageLine.update();}
function waitForChart(timeoutMs=6000){
  const start=Date.now();return new Promise((resolve)=>{(function poll(){if(window.Chart)return resolve(true);if(Date.now()-start>timeoutMs)return resolve(false);requestAnimationFrame(poll);})();});
}

/* ===== PDF ===== */
async function downloadPDF(){
  try{
    if(!window.jspdf||!window.jspdf.jsPDF) throw new Error("jsPDF unavailable");
    const el=document.querySelector("main"); const canvas=await html2canvas(el);
    const imgData=canvas.toDataURL("image/png"); const { jsPDF }=window.jspdf;
    const pdf=new jsPDF({orientation:"p",unit:"pt",format:"a4"});
    const pageW=pdf.internal.pageSize.getWidth(),pageH=pdf.internal.pageSize.getHeight();
    const margin=24,imgW=pageW-margin*2,ratio=canvas.height/canvas.width,imgH=imgW*ratio;
    pdf.text("Live ROI Tracking Demo",margin,28);
    if(imgH<=pageH-60){pdf.addImage(imgData,"PNG",margin,40,imgW,imgH);}
    else{const sliceH=pageH-80;let y=0,page=0;while(y<canvas.height){const slice=document.createElement("canvas");slice.width=canvas.width;slice.height=Math.min(sliceH*canvas.width/imgW,canvas.height-y);slice.getContext("2d").drawImage(canvas,0,y,canvas.width,slice.height,0,0,slice.width,slice.height);const img=slice.toDataURL("image/png");if(page>0)pdf.addPage();pdf.addImage(img,"PNG",margin,40,imgW,(slice.height/canvas.width)*imgW);y+=slice.height;page++;}} 
    pdf.save("Live_Tracking_Report.pdf");
  }catch(e){SAFE.warn("PDF export skipped:",e.message);}
}
SAFE.on("downloadPdfBtn","click",downloadPDF);

/* ===== SALESFORCE tabs + sub-tabs ===== */
document.addEventListener("click",(e)=>{
  const topTab=e.target.closest(".sf-tab"); if(topTab){document.querySelectorAll(".sf-tab").forEach(b=>b.classList.remove("active")); topTab.classList.add("active"); document.querySelectorAll(".sf-pane").forEach(p=>p.hidden=true); const pane=document.getElementById(topTab.dataset.tab); if(pane) pane.hidden=false;}
  const sub=e.target.closest(".sf-tabbtn"); if(sub){const wrap=sub.closest(".sf-record"); if(!wrap)return; wrap.querySelectorAll(".sf-tabbtn").forEach(x=>x.classList.remove("active")); sub.classList.add("active"); wrap.querySelectorAll(".sf-section").forEach(s=>s.hidden=true); const tgt=wrap.querySelector(`#${sub.dataset.tab}`); if(tgt) tgt.hidden=false;}
});

/* ===== ENRICHMENT DEMO ===== */
function isDemoEnrich(params){ return String(params.demo_enrich||"").toLowerCase()==="1"; }
function simulateEnrichment(params, geo){
  const seed=(geo?.ip||params?.utm_campaign||"crmhacker").toLowerCase();
  const picks=[
    {company:"Acme Robotics", domain:"acmerobotics.com", industry:"Computer Software", employees:"250-1k", revenue:"$50M–$100M", tech:["Salesforce","HubSpot","Marketo"], intent:["CRM ROI","RevOps consulting"]},
    {company:"Northstar FinTech", domain:"northstarfin.com", industry:"Financial Services", employees:"1k-5k", revenue:"$500M–$1B", tech:["Salesforce","Pardot","Snowflake"], intent:["Pipeline influence","Attribution modeling"]},
    {company:"BlueWave Health", domain:"bluewavehealth.org", industry:"Healthcare", employees:"1k-5k", revenue:"$100M–$500M", tech:["Salesforce","GA4","Segment"], intent:["HIPAA analytics","ABM routing"]},
    {company:"Vertex Cloud", domain:"vertexcloud.io", industry:"Information Technology", employees:"100-250", revenue:"$10M–$50M", tech:["Salesforce","HubSpot","Clearbit"], intent:["Lead scoring","Multi-touch ROI"]},
  ];
  let h=0;for(let i=0;i<seed.length;i++) h=((h<<5)-h)+seed.charCodeAt(i);
  const row=picks[Math.abs(h)%picks.length];
  const bump=(params.utm_source||"").includes("google")?0.74:0.62;
  return {...row, confidence: Math.round(100*bump)+"%"};
}
function renderEnrichment(enrich){
  SAFE.set("enrich_company",enrich?.company||"—");
  SAFE.set("enrich_domain",enrich?.domain||"—");
  SAFE.set("enrich_industry",enrich?.industry||"—");
  SAFE.set("enrich_employees",enrich?.employees||"—");
  SAFE.set("enrich_revenue",enrich?.revenue||"—");
  SAFE.set("enrich_tech",(enrich?.tech||[]).join(", ")||"—");
  SAFE.set("enrich_intent",(enrich?.intent||[]).join(", ")||"—");
  SAFE.set("enrich_conf",enrich?.confidence||"—");
}
function applyEnrichmentToSalesforce(enrich){
  if(!enrich) return;
  SAFE.set("sfLeadCompany",enrich.company);
  SAFE.set("sfAccount",enrich.company);
  SAFE.set("sfOppAccount",enrich.company);
  const detailEl=SAFE.$("sfLeadSourceDetail");
  if(detailEl && enrich.domain){
    const cur=detailEl.textContent==="—"?"":detailEl.textContent;
    detailEl.textContent=(cur?cur+" • ":"")+enrich.domain;
  }
}
SAFE.on("enrichToggleBtn","click",(e)=>{
  e.preventDefault();
  const url=new URL(location.href); const now=url.searchParams.get("demo_enrich");
  url.searchParams.set("demo_enrich", now==="1"?"0":"1"); location.href=url.toString();
});

/* ===== INIT ===== */
(async function init(){
  try{
    const params=persistParams();
    const dev=deviceInfo(); renderAcq(params); renderDevice(dev);
    SAFE.set("referrer_cap", getReferrer()); SAFE.set("landing_cap", params.landingUrl||location.href);

    let geo={}; try{ geo=await geoLookup(); renderGeo(geo); }catch(e){ SAFE.warn("geo failed",e.message); }

    const ok=await waitForChart(7000); if(ok) initCharts(); else SAFE.warn("Chart.js not ready; skipping charts");

    // Enrichment
    let enrich=null; if(isDemoEnrich(params)){ enrich=simulateEnrichment(params,geo); renderEnrichment(enrich); }

    // Salesforce preview
    const name="Taylor Example", email="taylor@example.com";
    SAFE.set("sfLeadName",name); SAFE.set("sfLeadEmail",email);
    SAFE.set("sfLeadSource",campaignGrouping(params));
    SAFE.set("sfUtmSource",params.utm_source||"—"); SAFE.set("sfUtmMedium",params.utm_medium||"—"); SAFE.set("sfUtmCampaign",params.utm_campaign||"—");
    SAFE.set("sfLeadSourceDetail",[params.utm_source,params.utm_medium,params.utm_campaign].filter(Boolean).join(" / ")||"(none)");
    const clickIds=["gclid","fbclid","msclkid","ttclid","li_fat_id"].filter(k=>params[k]).map(k=>`${k}=${params[k]}`).join("  •  ")||"(none)";
    SAFE.set("sfClickIds",clickIds);
    SAFE.set("sfDevice",`${dev.type} • ${dev.os} • ${dev.browser} • ${dev.screen}`);
    const geoLine=[geo.city,geo.region,geo.country].filter(Boolean).join(", ");
    SAFE.set("sfGeo",`${geo.ip||"—"} • ${geoLine||"—"}`); SAFE.set("sfCreated",new Date().toLocaleString());

    if(enrich) applyEnrichmentToSalesforce(enrich);

    // Opportunity models
    const cmCampaign=params.utm_campaign||"CRMH – ROI Demo";
    const amount=25000;
    const touches=[
      {name:"ROI Demo – Google Ads", role:"First", weightFT:1, weightLT:0, weightW:.3, weightLIN:.25},
      {name:"ROI Ebook – LinkedIn",  role:"Assist",weightFT:0, weightLT:0, weightW:.1, weightLIN:.25},
      {name:"ROI Webinar – Email",   role:"Lead",  weightFT:0, weightLT:0, weightW:.3, weightLIN:.25},
      {name:cmCampaign,              role:"Last",  weightFT:0, weightLT:1, weightW:.3, weightLIN:.25}
    ];
    const revFT=Math.round(amount*touches.reduce((s,t)=>s+t.weightFT ,0));
    const revLT=Math.round(amount*touches.reduce((s,t)=>s+t.weightLT ,0));
    const revLIN=Math.round(amount*touches.reduce((s,t)=>s+t.weightLIN,0));
    const revW=Math.round(amount*touches.reduce((s,t)=>s+t.weightW  ,0));
    SAFE.set("sfCmName",name); SAFE.set("sfCampaign",cmCampaign);
    SAFE.set("sfTouchRole",(params.gclid||params.li_fat_id)?"Last Touch":"Assist");
    SAFE.set("sfAttribPct",(params.gclid||params.li_fat_id)?"100%":"25%");
    SAFE.set("sfMemberStatus","Responded");
    SAFE.set("sfAccount", SAFE.$("sfLeadCompany").textContent || "Acme Corp");
    SAFE.set("sfCmUtms", JSON.stringify({utm_source:params.utm_source||null,utm_medium:params.utm_medium||null,utm_campaign:params.utm_campaign||null,gclid:params.gclid||null,li_fat_id:params.li_fat_id||null}));
    SAFE.set("sfOppName", `${SAFE.$("sfAccount").textContent} — RevOps Implementation`);
    SAFE.set("sfOppAccount", SAFE.$("sfAccount").textContent);
    SAFE.set("sfOppAmount", amount.toLocaleString('en-US',{style:'currency',currency:'USD'}));
    SAFE.set("sfOppStage", "Negotiation/Review"); SAFE.set("sfPrimaryCampaign", cmCampaign);
    SAFE.set("sfLT",  revLT .toLocaleString('en-US',{style:'currency',currency:'USD'}));
    SAFE.set("sfFT",  revFT .toLocaleString('en-US',{style:'currency',currency:'USD'}));
    SAFE.set("sfLIN", revLIN.toLocaleString('en-US',{style:'currency',currency:'USD'}));
    SAFE.set("sfW",   revW  .toLocaleString('en-US',{style:'currency',currency:'USD'}));

    // Reports table + charts
    const sampleCampaigns=[
      {name:"ROI Demo – Google Ads", spend:1200, pipeline:48000, revenue:revFT,  model:"First Touch"},
      {name:"ROI Ebook – LinkedIn",  spend: 800, pipeline:22000, revenue:Math.round(amount*0.10), model:"Assist/Linear"},
      {name:"ROI Webinar – Email",   spend: 300, pipeline:15000, revenue:Math.round(amount*0.20), model:"W-Shaped"},
      {name:cmCampaign,              spend:1000, pipeline:30000, revenue:revLT,  model:"Last Touch"}
    ];
    const tbody=SAFE.$("roiTableBody"); if(tbody){tbody.innerHTML=""; sampleCampaigns.forEach(c=>{const roi=((c.revenue-c.spend)/Math.max(1,c.spend))*100; const tr=document.createElement("tr"); tr.innerHTML=`
      <td style="padding:6px;border-bottom:1px solid var(--line)">${c.name}</td>
      <td style="padding:6px;border-bottom:1px solid var(--line)">${c.spend.toLocaleString('en-US',{style:'currency',currency:'USD'})}</td>
      <td style="padding:6px;border-bottom:1px solid var(--line)">${c.pipeline.toLocaleString('en-US',{style:'currency',currency:'USD'})}</td>
      <td style="padding:6px;border-bottom:1px solid var(--line)">${c.revenue.toLocaleString('en-US',{style:'currency',currency:'USD'})}</td>
      <td style="padding:6px;border-bottom:1px solid var(--line)">${roi.toFixed(0)}%</td>
      <td style="padding:6px;border-bottom:1px solid var(--line)">${c.model}</td>`; tbody.appendChild(tr);});}
    if(window.Chart){
      const mb=document.getElementById("modelBar"); if(mb){ new Chart(mb,{type:'bar',data:{labels:['First-Touch','Last-Touch','Linear','W-Shaped'],datasets:[{label:'Revenue $',data:[revFT,revLT,revLIN,revW],backgroundColor:['#94c6e1','#15a3d4','#8bd3dd','#06b6d4']}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}});}
      const td=document.getElementById("touchDist"); if(td){ new Chart(td,{type:'doughnut',data:{labels:['First','Assist','Lead','Last'],datasets:[{data:[1,1,1,1],backgroundColor:['#15a3d4','#8bd3dd','#a7f3d0','#e2e8f0']}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}},cutout:'60%'}});}
    }

    // Projection demo numbers
    SAFE.set("projCost","$4.00"); SAFE.set("projPipe","$12,000"); SAFE.set("projClose","21%"); SAFE.set("projRev","$2,520");
  }catch(e){ SAFE.err("init failed",e); }
})();
</script>
</body>
</html>
